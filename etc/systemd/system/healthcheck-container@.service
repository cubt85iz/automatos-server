[Unit]
Description=Healthcheck for containers

[Service]
EnvironmentFile=/etc/containers/config/%i.env
ExecStartPre=/usr/bin/test $(docker container inspect -f "{{.State.Running}}" %i) == "true"
ExecStartPre=/usr/bin/test $(docker container inspect -f "{{.State.Restarting}}" %i) == "true"
ExecStart=/usr/bin/curl -fsS -m 10 --retry 5 -o /dev/null "$MONITOR_URL"